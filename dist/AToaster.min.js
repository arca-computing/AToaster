angular.module("AToaster",["ngAnimate"]).factory("service.toaster",["$rootScope",function(a){"user strict";var b=function(b,c,d,e){var f={type:b,title:c,message:d,timeout:e};a.$broadcast("toaster:new",f)},c=function(){a.$broadcast("toaster:clear")};return{pop:function(a,c,d,e){b(a,c,d,e)},clearAndPop:function(a,d,e,f){c(),b(a,d,e,f)},clear:function(){c()}}}]).constant("toasterConfig",{timeout:3e3}).directive("toasterContainer",["$rootScope","$timeout","toasterConfig",function(a,b,c){"user strict";return{restrict:"AE",scope:{options:"="},template:'<div class="toaster-container"><div class="clearfix {{toast.type}}" ng-class="{\'fast\':toast.removeFast}" ng-repeat="toast in toasts" ng-click="removeToastFromUI(toast)" ng-mouseover="stopTimer(toast)" ng-mouseout="resetTimer(toast)"><div class="icon"><i class="glyphicon {{types[toast.type].css}}"></i></div><div class="infos"><div class="title">{{toast.title}}</div><div class="message">{{toast.message}}</div></div></div></div>',link:function(d){d.toasts=[],d.types={success:{css:"glyphicon-ok",excapable:!0},error:{css:"glyphicon-remove",excapable:!0},warning:{css:"glyphicon-warning-sign",excapable:!0},wait:{css:"glyphicon-refresh spin",excapable:!1}};var e=angular.extend({},c,d.$eval(d.options)),f=function(a){d.toasts.splice(d.toasts.indexOf(a),1)},g=function(){d.toasts=[]},h=function(a){"undefined"==typeof a.timeout&&(a.timeout=e.timeout),a.timeout>0&&(a.to=b(function(){f(a)},a.timeout))},i=function(a){b(function(){h(a),d.toasts.unshift(a)})};d.removeToastFromUI=function(a){d.types[a.type].excapable&&(a.removeFast=!0,b(function(){f(a)}))},d.resetTimer=function(a){h(a)},d.stopTimer=function(a){b.cancel(a.to)};var j=a.$on("toaster:new",function(a,b){i(b)}),k=a.$on("toaster:clear",function(){g()});d.$on("$destroy",function(){j(),k()})}}}]);